# 公理集合论

集合，表示一群具有共同或相似属性的个体的总和，作为一个抽象概念，在数学中处处可见。自然数是集合，函数也是集合，几何是集合，概率也是集合，我们甚至可以说，所有数学研究的对象都是集合。一切严格的数学理论，都是建立在集合的基础上的。因此，集合论是整个数学的基础。

19世纪末，康托从真正意义上创立了**朴素集合论**。但是，这时的人们对于集合的概念尚不完善，认为一切可定义的群体都可以称为集合。在这种定义下，一些很“大”的集合产生了。例如，所有的真命题构成的集合，所有的集合构成的集合。1901年，罗素提出了著名的**罗素悖论**：定义集合$$R=\{x \mid x\not \in x\}$$，则有$$R \in R \Longleftrightarrow R \not \in R$$的矛盾，指出了集合论本身是矛盾的。由于大量的数学命题都建立在集合论的基础上，罗素悖论的提出直接导致了数学基础的危机。

1922年，Ernst Zerelo和Abraham Fraenkel建立了公理集合论，也称ZF。ZF将集合所满足的性质建立在谓词逻辑上，从而避免了太大的“集合”的存在。因此，这次数学基础危机被彻底解决。

## ZF公理体系

ZF公理体系认为所有研究的对象都是集合，给出了一系公理描述集合论。

### 外延公理

$$∀A,B:(∀x:(x∈A↔x∈B)→A=B)$$

外延公理说如果所有A的元素都属于B，且所有B的元素都属于A，那么两个集合相等。因此定义了集合的无序性以及元素唯一性，或者说，一个集合被属于它的元素唯一确定，不论顺序。

如果定义集合的包含关系
$$A⊆B⇔∀x:(x∈A→x∈B)$$
则外延公理可以定义为（为什么）
$$∀A,B:(A⊆B∧B⊆A→A=B)$$

请看集合在Julia中的定义及使用
```
julia> A, B = Set([1,7,10,4,4]), Set(1:3:10);
julia> A == B
true
julia> issubset(A,B) && issubset(B,A)
true
```

下面几条公理说明了如何从已有的集合构造新的集合。

### 配对公理

$$∀x,y:∃A:x∈A∧y∈A$$

配对公理表示两个集合可以构成一个新集合，记作$$A=\{x,y\}$$。特别的，如果令$$x=y$$，则配对公理允许构造**单元素集**$$\{x\}$$；对任意有限个集合$$x_1,x_2,\ldots,x_n$$，我们可以多次使用配对公理唯一构造**多元素集**$$\{x_1,x_2,\ldots,x_n\}$$。

注意到目前构造的集合都是无序的，其实配对公理也可以构造有序对。给定集合$$x,y$$，我们构造二元**有序对**$$(x,y):=\{\{x\},\{x,y\}\}$$，则有$$(x,y)=(u,v)⇔x=u∧y=v$$（为什么）。所有的有序对构成的集合称**笛卡尔积**，记作$$x×y$$。

在Julia中，可用如下方法构造配对集和有序集
```
julia> x, y = Set([1,2]), Set([3,4]);
julia> unordered = Set([x,y])
Set(Set{Int64}[Set([4,3]),Set([2,1])])
julia> ordered1 = x,y
(Set([2,1]),Set([4,3]))
julia> ordered2 = (y,x)
(Set([4,3]),Set([2,1]))
julia> product = Set([(a,b) for a in x, b in y])
Set(Tuple{Int64,Int64}[(2,3),(2,4),(1,4),(1,3)])
```
注意，在Julia中，有序对用```,```分隔，并且可以省略括号。

### 并集公理

$$∀𝒞:∃A:∀x:(x∈A↔∃B:x∈B∧B∈𝒞)$$

并集公理定义了一族集合的并集A为每个𝒞中集合B的元素x构成的集合，记作$$A=⋃𝒞$$。若$$𝒞=\{B,C\}$$，则记$$A=B∪C=\{x|x \in B \vee x\in C\}$$。

在Julia中，计算集合的并集可用union函数。
```
julia> A, B, C = Set([1,3]), Set([3,2]), Set([3,4]);
julia> union(A,B,C)
Set([4,2,3,1])
```

### 幂集公理

$$∀A:∃𝒞:∀B:B∈𝒞↔∀x:(x∈B→x∈A)$$
或者
$$∀A:∃𝒞:∀B:(B⊆A→B∈𝒞)$$

幂集公理构造了集合A的幂集𝒞为所有子集构成的集合，记作𝓟(A)。幂集常用作构造更“大”的集合。

### 无穷公理

$$∃A:∅∈A∧∀x:(x∈A→x∪\{x\}∈A)$$

无穷公理保证了至少存在一个集合包含无穷多个元素。注意，无穷公理定义的集合A不是唯一的，其中含最“少”元素的集合可以看作自然数集。

回顾上一章中我们提到，符号本身是无意义的，只是为了表达符号背后的概念和思想。于是不同的符号，依习惯而不同，可以表达相同的概念。因此当我们接触到任何一个符号时，更应该关注符号传递的本质。

自然数有许多符号表示，可以是地上的石子，可以是一根绳上的绳结，可以是柱子上套着的圆盘，可以是0、1、2……。下面我们尝试通过集合以及无穷公理构造自然数。

首先定义**后继算子**$$S(x):=x∪\{x\}$$，然后依次选择并定义符号:

* $$0:=∅$$
* $$1:=S(0)=∅∪\{∅\}=\{∅\}=\{0\}$$
* $$2:=S(1)=\{∅\}∪\{\{∅\}\}=\{∅∪\{∅\}\}=\{0,1\}$$
* $$\vdots$$
* $$n:=S(n-1)=n-1∪\{n-1\}=\{0,1,\ldots,n-1\}$$
* $$\vdots$$
无穷公理保证存在集合$$ℕ:=\{0,1,2,\ldots\}$$，该集合即为**自然数集**。

### 分离公理

$$∀\vec v:∀A:∃B:∀x(x∈B↔x∈A∧P(x,\vec v,A))$$
其中，$$P(x,\vec v, A)$$是谓词公式，$$\vec v$$是一族自由变量。

分离公理允许从集合A中满足$$P(x,\vec v, A)$$的所有元素“过滤”出来构成集合，记作$$B=\{x \in A \mid P(x,\vec v,A)\}$$。分离公理避免了罗素悖论的出现。

用分离公理还可以定义一族集合的交集A为每个𝒞中集合B的元素x构成的集合，记作$$A=⋂𝒞$$。

$$∀𝒞:∃A:∀x:(x∈A↔∀B:x∈B∧B∈𝒞)$$

若$$𝒞=\{B,C\}$$，则记$$A=B∩C=\{x|x \in B \wedge x\in C\}$$。

在Julia中，分离公理常用于构造集合。```filter```函数用于过滤集合，```intersect```函数用于求集合交集。
```
julia> squares = Set([x for x=1:100 if round(sqrt(x))^2==x])
Set([4,9,25,100,81,16,36,64,49,1])
julia> pythagorea = Set([(x,y,z) for x=1:20, y=1:20, z=1:30 if x^2+y^2 == z^2 && x < y])
Set(Tuple{Int64,Int64,Int64}[(12,16,20),(8,15,17),(6,8,10),(15,20,25),(3,4,5),(9,12,15),(5,12,13)])
julia> filter(x->x%2==0, squares)
Set([4,100,16,36,64])
julia> filter(x->gcd(x...)==1, pythagorea)
Set(Tuple{Int64,Int64,Int64}[(8,15,17),(3,4,5),(5,12,13)])
julia> intersect(Set([1,2,3]), Set([2,4,3]))
Set([2,3])
```

### 替代公理

$$∀\vec v:∀A:(∀x:∃!y:x∈A∧P(x,y,\vec v,A)→∃B:∀y:(y∈B↔∃x:x∈A∧P(x,y,\vec v,A)))$$
其中，$$P(x,y,\vec v, A)$$是谓词公式，$$\vec v$$是一族自由变量。注意，$$∃!$$表示唯一存在，这限制了谓词公式P是一个A映射到B的函数。

在Julia中，我们可以用```map```函数实现替代公理。
```
julia> A = Set(1:10);
julia> P = x->x^2;
julia> map(P, A)
Set([4,100,9,25,81,16,64,36,49,1])
```

最后一条正则性公理避免了一些奇怪的无穷集合的出现。

### 正则性公理

$$∀𝒞:(∃A:A∈𝒞→∃A:A∈𝒞∧¬∃x:x∈A∧x∈𝒞)$$
或者
$$∀𝒞:(𝒞≠∅→∃A:A∈𝒞∧A∩𝒞=∅)$$

正则性公理说如果集合𝒞非空，则存在𝒞中的一个元素A，使得A与𝒞不包含同一个元素。正则性公理保证了不存在无穷递降的集合链，即不存在$$x_1∋x_2∋x_3∋\cdots$$。因此，也不存在循环集合链，即不存在$$x_1∋x_2∋\cdots∋x_n∋x_1$$。另外，正则性公理还是归纳法的基础。

### 练习
1. 在从已有的集合$$A$$和谓词公式$$P(x,A)$$*定义*新的集合$$B$$时，我们通常使用有两种描述方法，请思考两种定义方式是否有什么不同。
  * $$∀A:∃B:∀x:(x∈B↔P(x,A))$$
  * $$∀A:∃B:∀x:(P(x,A)→x∈B)$$
2. 请比较
  * $$∀x:(x∈A→P(x,A))$$，通常记作$$∀x∈A:P(x,A)$$
  * $$∀x:(x∈A∧P(x,A))$$
  * $$∃x:(x∈A→P(x,A))$$
  * $$∃x:(x∈A∧P(x,A))$$，通常记作$$∃x∈A:P(x,A)$$
3. 尝试构造n元有序组，并证明正确性，即两个有序组相等当且仅当逐分量相等。
4. 证明笛卡尔积$$X \times Y ⊆ 𝓟(𝓟(X \bigcup Y))$$。
5. 定义自然数ℕ上的加法+满足：(i)$$∀a∈ℕ:a+0=a$$(ii)$$∀a,b∈ℕ:a+S(b)=S(a+b)$$，请证明自然数上的加法具有交换律和结合律。类似请定义自然数ℕ上的乘法×，证明其交换律和结合律，以及对加法的分配律。
6. 请用分离公理和外延公理证明$$∃!∅:∀x:¬(x∈∅)$$,∅称为**空集**。
7. 有的作者将“存在唯一空集”被作为空集公理添加到公理集合论中，请证明在该理论下，分离公理和替代公理等价。
8. 事实上，配对公理在ZF中是不独立的、冗余的，请用替代公理将其导出，并证明可以构造有无穷多个元素的集合。
9. 请证明以下定理：(提示：尝试构造新集合，证明违反正则性公理）
  * $$∀x:¬(x∈x)$$
  * $$∀x,y:¬(x∈y∧y∈x)$$
  * $$∀x,y,z:¬(x∈y∧y∈z∧z∈x)$$

## 集合代数

上一节

## 关系与函数

## Julia实现
