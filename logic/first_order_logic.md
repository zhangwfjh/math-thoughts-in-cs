# 谓词逻辑

回顾上节中我们提到存在一些命题，既非真亦非假，譬如命题p(x)="x是偶数"。命题的真假取决于x的值，我们称像这样可以任意取值不受约束的变量为**自由变量**，而含有自由变量的命题则称为**谓词**。因此，命题逻辑的表达能力是有限的。为了扩展表达能力，我们需要对自由变量施加**量词**约束，使之成为**束缚变量**。

## 量词

### 概念

量词分为**存在量词**和**全称量词**。存在量词要求束缚变量至少存在一个值使得谓词成立，记作∃；全称量词要求束缚变量取所有值都要使得谓词成立，记作∀。例如，∃x:p(x)成立，因为至少对于x=2，x是偶数是成立的；而∀x:p(x)为假，因为并不是对于所有x，p(x)都成立，x=1便是反例。

一个谓词如果存在某个对自由变量的赋值，使得谓词成立，那么这个谓词称为**可满足的**；若任意赋值均能使谓词成立，则称为**恒真的**；

### 量词的交换性

相同的量词之间是可交换的。例如令p(x,y)表示一个n×n的表格中的第x行第y列被填充，则

* $$∃x,∃y:p(x,y)⇔∃y,∃x:p(x,y)⇔∃x,y:p(x,y)$$
* $$∀x,∀y:p(x,y)⇔∀y,∀x:p(x,y)⇔∀x,y:p(x,y)$$

![](https://upload.wikimedia.org/wikipedia/commons/5/5d/Predicate_logic%3B_2_variables%3B_example_matrix_e12.svg)![](https://upload.wikimedia.org/wikipedia/commons/5/55/Predicate_logic%3B_2_variables%3B_example_matrix_a12.svg)

分别表示至少有一个格子被填充，所有格子均被填充。但是，不同的量词之间不可交换。例如：

* $$∃x,∀y:p(x,y)⇎∀y,∃x:p(x,y)$$

![](https://upload.wikimedia.org/wikipedia/commons/0/02/Predicate_logic%3B_2_variables%3B_example_matrix_e1a2.svg)![](https://upload.wikimedia.org/wikipedia/commons/6/62/Predicate_logic%3B_2_variables%3B_example_matrix_a2e1.svg)

左侧表示至少有一行格子每一列都被填充，也就是说可以有一行或多行被填充，但必然一行中只要有一个格子被填充则该行所有格子都被填充。右侧表示每一列都至少有一个格子被填充，这些被填充的格子可以在同一行，也可以在不同行。

注意到，我们实际上有：

* $$∃x,∀y:p(x,y)⇒∀y,∃x:p(x,y)$$

证明：因为$$∃x:∀y:p(x,y)$$，所以存在a，$$∀y:p(a,y)$$，即$$∀y,∃x:p(x,y)$$ ∎

我们再来看一个例子，定义一个数列{f(n)}趋向于L当且仅当$$∀d>0,∃N>0,∀n>N:|f(n)-L|< d$$。直观上说，对于任意正数d，总存在一个正数N，只要n大于N，那么f(n)和L的距离小于d成立。也就是说，除前面有限项外，f(n)可以与L任意接近。但是，如果交换前面两个量词，则命题变为从第N+1项起，f(n)与L的距离都能小于任意距离d，这是不可能的（为什么)。因此，一般来说，对于∀x,∃y:p(x,y)，y是取决于x的，不同的x能使p(x,y)成立的y不一定相同。

### 量词与其他连接词

当量词与其他连接词同时出现时，量词的优先级处于析取与蕴涵之间。请注意以下恒等式：

1. $$¬∀x:p(x)⇔∃x:¬p(x)$$
2. $$¬∃x:p(x)⇔∀x:¬p(x)$$
3. $$∀x:p(x)∧∀x:q(x)⇔∀x:p(x)∧q(x)$$
4. $$∃x:p(x)∨∃x:q(x)⇔∃x:p(x)∨q(x)$$

在此仅证明1和3，2和4留作练习。

证明：

(1) $$¬∀x:p(x)⇔存在a，¬p(a)⇔∃x:¬p(x)$$ ∎

(3) "$$⇒$$" $$∀a:$$因为$$∀x:p(x)$$，所以$$p(a)$$，因为$$∀x:q(x)$$，所以$$q(a)$$，所以$$p(a)∧q(a)$$，故$$∀x:p(x)∧q(x)$$

"$$⇐$$"$$∀a:$$因为$$p(a)∧q(a)$$，所以$$p(a)$$，所以$$q(a)$$，故$$∀a:p(a)$$，故$$∀a:q(a)$$，即$$∀a:p(a)∧q(a)$$ ∎

## 练习

1. 请证明数列$$f(n)=(1+2+\cdots+n)/n^2$$趋向于1/2。尝试给出数列趋向于无穷的定义。
2. 请证明以下恒真式，并做出直观解释。
  1. $$(p→q)↔(¬q→¬p)$$
  2. $$(p→q)→((p→¬q)→¬p)$$
  3. $$(p→(q∧r))↔((p→q)∧(p→r))$$
  4. $$(¬∃x:p(x))↔(∀x:¬p(x))$$
  5. $$(∃x:p(x)∨∃x:q(x))↔(∃x:p(x)∨q(x))$$
  6. $$(∀x:p(x)→q(x))→(∀x:p(x)→∀x:q(x))$$
3. 数独是一种9×9的填数字游戏，要求每一行每一列和每一个九宫格内都有且仅有一个1-9之间的数字，假设用谓词p(x,y,z)表示第x行第y列填入数字z，请用逻辑连接词和量词表达命题“当前填字方案符合数独要求”。