# Julia语言基础

计算机，作为一台物理机器，本质上只是一堆电子元件的集合。在接通电源以后，计算机根据电信号的输入，遵守物理定律，产生状态的变化，并产生电信号输出。为了使得输出与输入有一定的关联，或者说，让输出是为输入的某种人为定义的函数，我们需要设计具有完成某种功能能力的电路。幸运的是，现代计算机已经完成了对所有可计算函数的电路设计，人们只需要通过修改输入，计算机便可根据要求输出函数结果。不过，计算机终究没有足够的智慧理解人类的语言，我们依旧需要将我们的语言按照一定规范转换为计算机所能理解的语言。我们把这种转换称为**计算机编程**。

实际上，计算机所能理解的语言无非还是电信号，及一序列的高低电位，序列中的每一个电位叫做一个**比特**。我们通常用0和1分别表示低电位和高电位，因此可以认为，计算机所理解的语言，也称**机器语言**，就是01串，也叫**比特串**。为了便于人们编程，计算机先驱发明了许多不同的中间语言，称为**高级语言**。高级语言最大程度的贴近人们的语言习惯，使得人们可以方便的利用高级语言准确的表达所要解决的问题。然后，再通过已经设计好的**编译器**或**解释器**，将高级语言翻译为机器语言，最后通过计算机的计算产生问题结果。

本书推荐的Julia是2012年由MIT团队设计开发的一种高级语言。Julia的语法非常简单，对于初学者是一个非常友好和直接的与计算机对话的工具。接下来，我们将介绍一些Julia的基本语法。想要了解更多关于Julia的读者可以参考官方手册。

## 安装及使用

![](http://docs.julialang.org/en/release-0.5/_static/julia-logo.svg)

Julia可以通过官方网站([julialang.org](http://julialang.org/downloads/))直接下载安装即可，也可以通过注册登录([juliabox.com](https://www.juliabox.com/))直接在线使用。

实际上，任何一个文本编辑器都可以用于编程。为了提升效率和编程舒适度，我们推荐两个非常出色的编辑器，一个是[Atom](https://atom.io/)，一个是[Sublime](http://www.sublimetext.com/)。一些软件商甚至将代码、编译、调试和输出功能集成在一个编辑器中，称为**集成开发环境**，Julia官方推荐的集成开发环境为Juno([junolab.org](http://junolab.org/))。

双击Julia可执行文件或在命令行中输入```julia```即可进入Julia编程环境。输入```1+1```，然后回车，则julia即刻返回2。若要执行已经在文本编辑器中写完的程序，可以输入```include("文件名.jl")```，Julia程序默认的文件扩展名为.jl。输入```exit()```可以退出Julia编程环境。

若在Julia使用过程中想要查看某个函数的使用方法，可以首先输入```?```，再输入相应命令，即可获得使用帮助。也可以查看Julia的[使用文档](http://docs.julialang.org/)。我们还提供了一个[快速参考手册](https://trello.com/b/fppQ3unx/julia-manual)。

## 变量

### 定义

变量用于存储计算中的一些值，留作今后使用。例如，当我们在草稿纸上计算123×45时，首先计算123×5，再计算123×40，最后将两个量相加得到最后的乘积。为了在计算机中保存123×5和123×40的值，我们需要将它们放在两个变量当中，并且给予这两个变量**变量名**。

在Julia中，保存变量只要输入“变量名=变量值”即可，例如
```
julia> x = 123
123
julia> y = 45
45
julia> z = x*y
5535
```
当同时赋值多个变量时，还可以通过
```
julia> u = v = 123
123
julia> a, b = 5u, 40v
(615,4920)
julia> c = a+b
5535
```

注意，多数变量名应以字母开头，中间可以添加数字或下划线，并且应尽可能表达该变量的意义，如i,j常用于表示循环变量，total常用于统计总数，x1,x2常用于表示x的两个值。并且，变量名是大小写敏感的，Var和var会被认为是两个变量。

### 数据类型

变量在计算机中同样是以比特串的形式存储的，我们可以通过```bits```函数查看变量的比特表示，如
```
julia> x, y = 2, 2.0
(2,2.0)
julia> bits(x)
"0000000000000000000000000000000000000000000000000000000000000010"
julia> bits(y)
"0100000000000000000000000000000000000000000000000000000000000000"
```
在64位的计算机中，CPU一个时钟周期可以处理的比特串长度为64位，因此一个数通常使用64比特表示。从上面的例子我们发现，虽然2和2.0在数学上是相等的，但在计算机中有不一样的表示，这是为什么？我们说计算机中没有小数点，也没有正负号，要表示小数或者负数同样需要用64个比特。于是，为了区分它们，必须指定变量类型。正如用手指表示“二”的时候，如果没有被正确解读，可能被误认为是“V”。

另一个可能出现的问题，如果一个数只用64个比特表示，那么岂不是最多只能表示2^64个数（为什么）。因此，我们必须要允许用更多的比特来表示更多的有效数字。变量类型的另一个作用便是指明表示变量所需的比特数。

在Julia中，变量类型可以被编译器隐式地做出推断。但有时为了提高程序运行效率，或表示更高的精度，我们可以显式指出变量类型。如
```
julia> x, y = Int16(2), Int128(2)
(2,2)
julia> bits(x)
"0000000000000010"
julia> bits(y)
"00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000010"
```

变量不仅可以表示数字，还可以表示如布尔值，字符或字符串。下面总结了Julia的一些常见的基本类型。

| 数据类型 | 具体类型 | 示例 |
| -- | -- | -- |
| 整型（整数）/无符号整型（非负） | Int, UInt | 1, -2, 3e4 |
| 浮点型（小数） | Float | 1., -2.3, 4e-5, |
| 布尔型 | Bool | true, false |
| 字符/字符串 | Char, String | 'x', "string" |

## 运算符

运算符，正如我们接触过的加减乘除，是一种数到数的映射。或者，我们可以看作是一种以符号为名称的函数。例如
```
julia> 1+2+3, +(4,5,6)
(6,15)
julia> 1<=2, >(1,2)
(true,false)
```

运算符根据操作数的个数，分为一元运算符、二元运算符、三元运算符；根据在操作数中的位置，分为前缀运算符、中缀运算符和后缀运算符。根据运算种类，还可以分为

### 算术运算符

| 运算符 | 说明 | 示例 |
| -- | -- | -- |
| ```+x``` | 恒等算子 | ```+1```返回1 |
| ```-x``` | 加法逆 | ```-1```返回-1 |
| ```+``` | 和 | ```2+3```返回5 |
| ```-``` | 差 | ```2-3```返回-1 |
| ```*``` | 积 | ```2*3```返回6 |
| ```/``` | 商 | ```3/2```返回1.5 |
| ```\``` | 逆商 | ```2\3```返回1.5 |
| ```%``` | 余数 | ```3%2```返回1 |
| ```^``` | 幂 | ```3^2```返回9 |

### 关系运算符

| 运算符 | 说明 | 示例 |
| -- | -- | -- |
| == | 相等比较 | ```1==2```返回false|
| != | 不等比较 | ```1!=2```返回true|
| >, >= | 大于, 大于或等于 | ```1>2, 1>=2, 2>=2>3```返回false|
| <, <= | 小于, 小于或等于 | ```1<2, 1<=2, 2<=2<3```返回true |

### 逻辑运算符

| 运算符 | 说明 | 示例 |
| -- | -- | -- |
| ```!``` | 逻辑非 | ```!true```返回false |
| ```&&``` | 合取 | ```true&&false```返回false |
| ```∣``` | 析取 | ```true∣∣false```返回true |

注意，&&和||存在短路现象，即当前操作数可以确定结果时，则不计算后操作数。

### 位运算符

位运算符是将两个操作数的二进制逐比特进行运算返回结果。

| 运算符 | 说明 | 示例 |
| -- | -- | -- |
| ```~``` | 位取反 | ```~2```返回3 |
| ```&``` | 位与 | ```2&3```返回2 |
| ```∣``` | 位或 | ```2∣3```返回3 |
| ```$``` | 异或 | ```2$3```返回1 |
| ```<<``` | 逻辑左移 | ```2<<1```返回4 | 
| ```<<<``` | 算数左移 | ```2<<<1```返回4 |
| ```>>``` | 逻辑/算数右移 | ```2>>1```返回1 |

### 赋值运算符

| 运算符 | 说明 | 示例 |
| -- | -- | -- |
| ```=``` | 赋值 | ```x=y```令x值为y |
| ```op=``` | 运算后赋值，op为算术或位运算符 | ```x+=2```令x值增加2 |

另外，对于两个数组的逐分量运算，可以用.跟上一个相应运算符，如
```
julia> x=[1,3,5];y=[6,4,2];
julia> x.*y
[6,12,10]
julia> x.>y
[true,true,false]
julia> x.-=y; x
[-5,-1,3]
```

当多个运算符同时出现时，为了避免产生歧义，应按如下优先级依次进行计算：算数、位（先乘除，后加减）>关系>逻辑>赋值。